	<p>#!/bin/sh
#
	<ol>
		<li>An example hook script to verify what is about to be committed.</li>
		<li>Called by &#8220;git commit&#8221; with no arguments.  The hook should</li>
		<li>exit with non-zero status after issuing an appropriate message if</li>
		<li>it wants to stop the commit.</li>
	</ol>
#
	<ol>
		<li>To enable this hook, rename this file to &#8220;pre-commit&#8221;.</li>
	</ol></p>

	<p>if git rev-parse &#8212;verify HEAD >/dev/null 2>&1<br />
then
	against=HEAD<br />
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)<br />
fi</p>

	<ol>
		<li>If you want to allow non-<span class="caps">ASCII</span> filenames set this variable to true.<br />
allownonascii=$(git config &#8212;type=bool hooks.allownonascii)</li>
	</ol>

	<ol>
		<li>Redirect output to stderr.<br />
exec 1>&2</li>
	</ol>

	<ol>
		<li>Cross platform projects tend to avoid non-<span class="caps">ASCII</span> filenames; prevent</li>
		<li>them from being added to the repository. We exploit the fact that the</li>
		<li>printable range starts at the space character and ends with tilde.<br />
if [ &#8220;$allownonascii&#8221; != &#8220;true&#8221; ] &&amp;
	# Note that the use of brackets around a tr range is ok here, (it&#8217;s
	# even required, for portability to Solaris 10&#8217;s /usr/bin/tr), since
	# the square bracket bytes happen to fall in the designated range.
	test $(git diff-index &#8212;cached &#8212;name-only &#8212;diff-filter=A -z $against |
	  LC_ALL=C tr -d &#8216;[ -~]\0&#8217; | wc -c) != 0<br />
then
	cat <<\EOF<br />
Error: Attempt to add a non-<span class="caps">ASCII</span> file name.</li>
	</ol>

	<p>This can cause problems if you want to work with people on other platforms.</p>

	<p>To be portable it is advisable to rename the file.</p>

	<p>If you know what you are doing you can disable this check using:</p>

  git config hooks.allownonascii true
EOF
	exit 1
fi

	<ol>
		<li>If there are whitespace errors, print the offending file names and fail.<br />
exec git diff-index &#8212;check &#8212;cached $against &#8212;</li>
	</ol>