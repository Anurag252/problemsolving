	<p>class Solution:
    def takeCharacters(self, s: str, k: int) -&gt; int:
        count = [0] * 3
        n = len(s)</p>

        # Count total occurrences
        for c in s:
            count[ord&#169; &#8211; ord(&#8220;a&#8221;)] += 1

        # Check if we have enough characters
        for i in range(3):
            if count[i] &lt; k:
                return -1

        window = [0] * 3
        left, max_window = 0, 0

        # Find the longest window that leaves k of each character outside
        for right in range(n):
            window[ord(s[right]) &#8211; ord(&#8220;a&#8221;)] += 1

            # Shrink window if we take too many characters
            while left &lt;= right and (
                count<sup class="footnote" id="fnrev987e18c2d9b44fe181f1d2be45771843-1"><a href="#fn987e18c2d9b44fe181f1d2be45771843-1">0</a></sup> &#8211; window<sup class="footnote"><a href="#fn987e18c2d9b44fe181f1d2be45771843-1">0</a></sup> &lt; k
                or count<sup class="footnote" id="fnrev987e18c2d9b44fe181f1d2be45771843-2"><a href="#fn987e18c2d9b44fe181f1d2be45771843-2">1</a></sup> &#8211; window<sup class="footnote"><a href="#fn987e18c2d9b44fe181f1d2be45771843-2">1</a></sup> &lt; k
                or count<sup class="footnote" id="fnrev987e18c2d9b44fe181f1d2be45771843-3"><a href="#fn987e18c2d9b44fe181f1d2be45771843-3">2</a></sup> &#8211; window<sup class="footnote"><a href="#fn987e18c2d9b44fe181f1d2be45771843-3">2</a></sup> &lt; k
            ):
                window[ord(s[left]) &#8211; ord(&#8220;a&#8221;)] -= 1
                left += 1

            max_window = max(max_window, right &#8211; left + 1)

        return n &#8211; max_window