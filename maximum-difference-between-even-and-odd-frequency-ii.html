	<p>class Solution:
    def maxDifference(self, s: str, k: int) -&gt; int:
        def getStatus(cnt_a: int, cnt_b: int) -&gt; int:
            return ((cnt_a &amp; 1) &lt;&lt; 1) | (cnt_b &amp; 1)</p>

        n = len(s)
        ans = float(&#8220;-inf&#8221;)
        for a in [&#8220;0&#8221;, &#8220;1&#8221;, &#8220;2&#8221;, &#8220;3&#8221;, &#8220;4&#8221;]:
            for b in [&#8220;0&#8221;, &#8220;1&#8221;, &#8220;2&#8221;, &#8220;3&#8221;, &#8220;4&#8221;]:
                if a == b:
                    continue

                best = [float(&#8220;inf&#8221;)] * 4
                cnt_a = cnt_b = 0
                prev_a = prev_b = 0
                left = -1
                for right in range(n):
                    cnt_a += s[right]  a
                    cnt_b += s[right]  b
                    while right &#8211; left &gt;= k and cnt_b &#8211; prev_b &gt;= 2:
                        left_status = getStatus(prev_a, prev_b)
                        best[left_status] = min(
                            best[left_status], prev_a &#8211; prev_b
                        )
                        left += 1
                        prev_a += s[left]  a
                        prev_b += s[left]  b

                    right_status = getStatus(cnt_a, cnt_b)
                    if best[right_status ^ 0b10] != float(&#8220;inf&#8221;):
                        ans = max(
                            ans, cnt_a &#8211; cnt_b &#8211; best[right_status ^ 0b10]
                        )

        return ans